@model IEnumerable<Quest>
@{
    ViewData["Title"] = "Quest Board";
    var posterImages = new string[] { "Poster1.png", "Poster2.png", "Poster3.png", "Poster4.png", "Poster5.png", "Poster6.png" };
    var waxSeals = new string[] { "Crown Seal.png", "Eagle Seal.png", "Flower Seal.png", "Sigil Seal.png" };
    var random = new Random();
}
<div class="quest-board-container">
    @foreach (var quest in Model)
    {
        var posterIndex = Math.Abs(quest.Id.GetHashCode()) % posterImages.Length;
        var posterImage = posterImages[posterIndex];
        var sealIndex = Math.Abs(quest.Id.GetHashCode()) % waxSeals.Length;
        var waxSeal = waxSeals[sealIndex];
        
        // Generate truly random position for wax seal (changes on each refresh)
        var sealTop = 25 + (random.Next(0, 40)); // 25-65% from top (well within poster)
        var sealLeft = 25 + (random.Next(0, 50)); // 25-75% from left (well within poster)
        
        <div class="fantasy-quest-card" 
             style="background-image: url('/images/Blanks/Blanks w Shadow/@posterImage');"
             onclick="window.location.href='@Url.Action("Details", "Quest", new { id = quest.Id })'">
            
            <!-- Wax Seal -->
            <div class="wax-seal" style="top: @(sealTop)%; left: @(sealLeft)%;">
                <img src="/images/Wax Seals/@waxSeal" alt="@(quest.IsFinalized ? "Finalized" : "Open") Quest" 
                     class="seal-image @(quest.IsFinalized ? "finalized-seal" : "open-seal")" />
            </div>
            
            <div class="quest-content">
                <div class="quest-header">
                    <div class="difficulty-dice">
                        @if (quest.Difficulty == Difficulty.Easy)
                        {
                            <!-- d4 (4-sided die) -->
                            <svg class="dice-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <polygon points="50,15 25,75 75,75" fill="#32CD32" stroke="#228B22" stroke-width="3"/>
                                <polygon points="50,15 75,75 50,60" fill="#90EE90" stroke="#228B22" stroke-width="2"/>
                                <polygon points="25,75 50,60 75,75" fill="#98FB98" stroke="#228B22" stroke-width="2"/>
                                <text x="50" y="55" text-anchor="middle" font-family="serif" font-size="16" font-weight="bold" fill="#000">4</text>
                            </svg>
                        }
                        else if (quest.Difficulty == Difficulty.Medium)
                        {
                            <!-- d6 (6-sided die) -->
                            <svg class="dice-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <rect x="20" y="20" width="60" height="60" fill="#FFD700" stroke="#FFA500" stroke-width="3"/>
                                <polygon points="20,20 35,10 95,10 80,20" fill="#FFFF99" stroke="#FFA500" stroke-width="2"/>
                                <polygon points="80,20 95,10 95,70 80,80" fill="#F0E68C" stroke="#FFA500" stroke-width="2"/>
                                <circle cx="35" cy="35" r="3" fill="#000"/>
                                <circle cx="65" cy="35" r="3" fill="#000"/>
                                <circle cx="35" cy="50" r="3" fill="#000"/>
                                <circle cx="65" cy="50" r="3" fill="#000"/>
                                <circle cx="35" cy="65" r="3" fill="#000"/>
                                <circle cx="65" cy="65" r="3" fill="#000"/>
                            </svg>
                        }
                        else if (quest.Difficulty == Difficulty.Hard)
                        {
                            <!-- d12 (12-sided die) -->
                            <svg class="dice-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <polygon points="50,10 70,25 65,50 35,50 30,25" fill="#FF6347" stroke="#DC143C" stroke-width="3"/>
                                <polygon points="70,25 85,45 70,65 65,50" fill="#FF4500" stroke="#DC143C" stroke-width="2"/>
                                <polygon points="30,25 15,45 30,65 35,50" fill="#FF4500" stroke="#DC143C" stroke-width="2"/>
                                <polygon points="35,50 65,50 70,65 50,80 30,65" fill="#CD5C5C" stroke="#DC143C" stroke-width="2"/>
                                <polygon points="85,45 70,65 75,80 90,65" fill="#B22222" stroke="#DC143C" stroke-width="2"/>
                                <polygon points="15,45 30,65 25,80 10,65" fill="#B22222" stroke="#DC143C" stroke-width="2"/>
                                <text x="50" y="45" text-anchor="middle" font-family="serif" font-size="14" font-weight="bold" fill="#FFF">12</text>
                            </svg>
                        }
                        else if (quest.Difficulty == Difficulty.Deadly)
                        {
                            <!-- d20 (20-sided die) -->
                            <svg class="dice-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <polygon points="50,5 75,30 60,55 40,55 25,30" fill="#8B008B" stroke="#4B0082" stroke-width="3"/>
                                <polygon points="75,30 85,50 60,55" fill="#9932CC" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="25,30 15,50 40,55" fill="#9932CC" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="40,55 50,75 60,55" fill="#DA70D6" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="85,50 75,70 60,55" fill="#BA55D3" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="15,50 25,70 40,55" fill="#BA55D3" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="60,55 75,70 65,85 50,75" fill="#9370DB" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="40,55 25,70 35,85 50,75" fill="#9370DB" stroke="#4B0082" stroke-width="2"/>
                                <polygon points="50,75 65,85 50,95 35,85" fill="#7B68EE" stroke="#4B0082" stroke-width="2"/>
                                <text x="50" y="45" text-anchor="middle" font-family="serif" font-size="12" font-weight="bold" fill="#FFF">20</text>
                            </svg>
                        }
                    </div>
                </div>
                
                <div class="quest-body">
                    <h3 class="quest-title">@quest.Title</h3>
                    <p class="quest-description">@quest.Description</p>
                    
                    <div class="quest-dm">
                        <strong>Dungeon Master:</strong> @quest.DmName
                    </div>
                    
                    @if (quest.IsFinalized && quest.FinalizedDate.HasValue)
                    {
                        <div class="quest-date">
                            <strong>Quest Date:</strong><br>
                            @quest.FinalizedDate.Value.ToString("MMM dd, yyyy 'at' h:mm tt")
                        </div>
                        <div class="quest-players">
                            <strong>Selected Adventurers:</strong><br>
                            @string.Join(", ", quest.PlayerSignups.Where(ps => ps.IsSelected).Select(ps => ps.PlayerName))
                        </div>
                    }
                    else
                    {
                        <div class="quest-signups">
                            <strong>Adventurers signed up:</strong> @quest.PlayerSignups.Count()
                        </div>
                    }
                </div>
            </div>
        </div>
    }
</div>

