@model IEnumerable<Quest>
@{
    ViewData["Title"] = "Quest Board";
    var posterImages = new string[] { "Poster1.png", "Poster2.png", "Poster3.png", "Poster4.png", "Poster5.png", "Poster6.png" };
    var random = new Random();
}
<div class="quest-board-container">
    @foreach (var quest in Model)
    {
        var posterIndex = Math.Abs(quest.Id.GetHashCode()) % posterImages.Length;
        var posterImage = posterImages[posterIndex];
        
        <div class="fantasy-quest-card" 
             style="background-image: url('/images/Blanks/Blanks w Shadow/@posterImage');"
             onclick="window.location.href='@Url.Action("Details", "Quest", new { id = quest.Id })'">
            <div class="quest-content">
                <div class="quest-header">
                    <span class="fantasy-difficulty-badge difficulty-@quest.Difficulty.ToString().ToLower()">
                        @quest.Difficulty
                    </span>
                    <span class="quest-status @(quest.IsFinalized ? "finalized" : "open")">
                        @(quest.IsFinalized ? "FINALIZED" : "OPEN")
                    </span>
                </div>
                
                <div class="quest-body">
                    <h3 class="quest-title">@quest.Title</h3>
                    <p class="quest-description">@quest.Description</p>
                    
                    <div class="quest-dm">
                        <strong>Dungeon Master:</strong> @quest.DmName
                    </div>
                    
                    @if (quest.IsFinalized && quest.FinalizedDate.HasValue)
                    {
                        <div class="quest-date">
                            <strong>Quest Date:</strong><br>
                            @quest.FinalizedDate.Value.ToString("MMM dd, yyyy 'at' h:mm tt")
                        </div>
                        <div class="quest-players">
                            <strong>Selected Adventurers:</strong><br>
                            @string.Join(", ", quest.PlayerSignups.Where(ps => ps.IsSelected).Select(ps => ps.PlayerName))
                        </div>
                    }
                    else
                    {
                        <div class="quest-signups">
                            <strong>Adventurers signed up:</strong> @quest.PlayerSignups.Count()
                        </div>
                    }
                </div>
            </div>
        </div>
    }
</div>

